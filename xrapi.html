<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://www.w3.org/2005/10/profile">
  <link rel="icon" type="image/png" href="img/favicon.png">
  <meta http-equiv="Content-Language" content="en" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="author" content="WinlatorXR" />
  <meta name="description" content="WinlatorXR" />
  <meta name="robots" content="index,nofollow" />
  <meta name="copyright" content="WinlatorXR" />
  <link rel="stylesheet" href="styles.css">
  <title>WinlatorXR</title>
</head>
<body>
	<table>
		<tr>
		  <td width="50%">
			<img src="img/winlatorxr_api.png" width="100%">
		  </td>
		  <td width="50%">
			<p>
			  <strong>WinlatorXR's API</strong> provides 6DOF tracking data and controller inputs over UDP
			  for use in games and mods within a container.
			</p>

			<p>
			  This is an experimental and evolving feature of WinlatorXR, and as such maintains various versions of the API for longterm compatibility. <br/>
			  Currently this API must be used on a per-game or per-mod basis, as it is not a total replacement for the OpenXR runtime at this time. <br/>
			  Some features of this API include:
			</p>

			<ul>
			  <li><strong>Render in 3D</strong> – WinlatorXR API supports rendering 3D content via both Side-By-Side (SBS) and Alternate Eye Rendering (AER) methods.</li>
			  <li><strong>Controller Haptics</strong> – UDP data returned from a game or app using the WinlatorXR API can trigger haptics in the player controllers.</li>
			  <li><strong>Monocular VR</strong> – For content that cannot render in 3D, 6DOF tracking can still be used for a monocular VR experience.</li>
			  <li><strong>VR in a Window</strong> – 6DOF tracking data can also be used without needing to render a fully immersive display, for a hybrid gaming experience.</li>
			</ul>
		  </td>
		</tr>
	</table>

	<div>
		<h2 class="heading-element" tabindex="-1">
			Required changes for the Windows app
		</h2>
	</div>
	<ol>
		<li>
			WinlatorXR checks for Z:\tmp\xr\version file and read the API version which should be used
		</li>
		<li>
			The data are sent using UDP protocol on localhost:7872 as ASCII string in order which can be found below.
		</li>
		<li>
			It is important to keep the Windows app as much in sync as possible, ideally holding renderer until HMD_SYNC changes.
		</li>
		<li>
			Windows app have to render value of HMD_SYNC as shade of red (in sRGB colorspace) into top-left corner.
		</li>
		<li>
			Information about used headset is written into Z:\tmp\xr\system (manufacturer, product, Android version, security patch version).
		</li>
	</ol>

	<center>
		<img src="img/winlatorxr_pcvr.png" width="67%"><br/>
		<p>The major difference between PCVR and WinlatorXR API</p><br/>
	</center>

	<div>
		<h2 class="heading-element" tabindex="-1">
			XrAPI 0.3 specification
		</h2>
	</div>
	<h3>Outgoing UDP Data (Windows App → WinlatorXR)</h3>
	<p>The Windows app/game has to sent data on localhost:7278 as string of float numbers separated by space:</p>
	<center><table>
	  <tr>
	    <th>Field</th><th>Type</th><th>Description</th>
	  </tr>
	  <tr>
	    <td>L_HAPTICS</td><td>Float</td><td>Left controller vibration duration (frames)</td>
	  </tr>
	  <tr>
	    <td>R_HAPTICS</td><td>Float</td><td>Right controller vibration duration (frames)</td>
	  </tr>
	  <tr>
	    <td>MODE_VR</td><td>Integer</td><td>1 = Enable VR, 0 = Disable</td>
	  </tr>
	  <tr>
	    <td>MODE_3D</td><td>Integer</td><td>0 = No 3D, 1 = SBS, 2 = AER, -1 = User controlled</td>
	  </tr>
	  <tr>
	    <td>HMD_FOVX</td><td>Float</td><td>Custom horizontal FOV (degrees, if > 1)</td>
	  </tr>
	  <tr>
	    <td>HMD_FOVY</td><td>Float</td><td>Custom vertical FOV (degrees, if > 1)</td>
	  </tr>
	</table></center>
    <br/>

    <p>3D mode defines which method is going to be used to render stereoscopic frames</p>
	<center><table>
	<tr>
		<th>3D Mode</th><th>Description</th>
	</tr>
	<tr>
		<td><strong>Side-by-Side (SBS)</strong></td>
		<td>
		The left half of the rendered frame is displayed to the left eye,
		and the right half is displayed to the right eye.
		</td>
	</tr>
	<tr>
		<td><strong>Alternate Eye Rendering (AER)</strong></td>
		<td>Set the blue frame sync pixel to: 0 when rendering the left eye, 255 when rendering the right eye<br/>
		Rapidly alternating between left and right frames creates the stereoscopic 3D effect.
		</td>
	</tr>
	<tr>
		<td><strong>User controlled</strong></td>
		<td>User can select in XR settings whenever SBS or flat mode should be used.</td>
	</tr>
	</table></center>

	<h3>Incoming UDP Data (WinlatorXR → Windows App)</h3>
	<p>WinlatorXR provides data on localhost:7872 as string separated by space:</p>

	<center><table>
		<tr>
			<th>Section</th><th>Fields</th><th>Description</th>
		</tr>

		<tr>
			<td><strong>Float Array</strong></td>
			<td valign="top">
			<strong>Left Controller</strong><br>
			L_QX, L_QY, L_QZ, L_QW<br>
			L_THUMBSTICK_X, L_THUMBSTICK_Y<br>
			L_X, L_Y, L_Z<br><br>

			<strong>Right Controller</strong><br>
			R_QX, R_QY, R_QZ, R_QW<br>
			R_THUMBSTICK_X, R_THUMBSTICK_Y<br>
			R_X, R_Y, R_Z<br><br>

			<strong>Headset (HMD)</strong><br>
			HMD_QX, HMD_QY, HMD_QZ, HMD_QW<br>
			HMD_X, HMD_Y, HMD_Z<br>
			HMD_IPD, HMD_FOVX, HMD_FOVY, HMD_SYNC
			</td>
			<td valign="top">
			Space-separated float values representing full 6DOF tracking data.<br><br>
			• QX/QY/QZ/QW = Quaternion rotation<br>
			• X/Y/Z = Position in 3D space<br>
			• THUMBSTICK_X/Y = Analog input values<br>
			• HMD_IPD = Interpupillary distance<br>
			• HMD_SYNC = Frame synchronization value
			</td>
		</tr>

		<tr>
			<td><strong>Boolean States</strong></td>
			<td valign="top">
			<strong>Left Controller</strong><br>
			L_GRIP, L_MENU, L_THUMBSTICK_PRESS<br>
			L_THUMBSTICK_LEFT, L_THUMBSTICK_RIGHT<br>
			L_THUMBSTICK_UP, L_THUMBSTICK_DOWN<br>
			L_TRIGGER, L_X, L_Y<br><br>

			<strong>Right Controller</strong><br>
			R_A, R_B, R_GRIP<br>
			R_THUMBSTICK_PRESS<br>
			R_THUMBSTICK_LEFT, R_THUMBSTICK_RIGHT<br>
			R_THUMBSTICK_UP, R_THUMBSTICK_DOWN<br>
			R_TRIGGER
			</td>
			<td valign="top">
			Boolean string containing characters:<br>
			<strong>T</strong> = TRUE<br>
			<strong>F</strong> = FALSE<br><br>
			Values are transmitted in the exact order shown.
			</td>
		</tr>

		<tr>
			<td><strong>Boolean States</strong></td>
			<td valign="top">Immersive, SBS</td>
			<td valign="top">
			Boolean string containing characters:<br>
			<strong>T</strong> = TRUE<br>
			<strong>F</strong> = FALSE<br><br>
			<strong>Immersive</strong> – Fully immersive VR mode active<br>
			<strong>SBS</strong> – Side-by-side rendering enabled
			</td>
		</tr>

	</table></center>

	<div>
		<h2 class="heading-element" tabindex="-1">
			Code examples
		</h2>
	</div>
	<ul>
		<li>
			<a target="_blank" rel="noopener noreferrer" href="https://github.com/bigelod/SixDOFinator_MinimalProject">SixDOFinator_MinimalProject</a> - Unity sample implementation (minimal project EXE, C#)
		</li>
		<li>
			<a target="_blank" rel="noopener noreferrer" href="https://github.com/bigelod/SixDOFinator_SampleProject">SixDOFinator_SampleProject</a> - Unity sample implementation (full project EXE, C#)
		</li>
		<li>
			<a target="_blank" rel="noopener noreferrer" href="https://github.com/WinlatorXR/opentrackWXR">opentrackWXR</a> - A fork of Opentrack to send 6DOF data to TrackIR compatible games (full project EXE, C++)
		</li>
		<li>
			<a target="_blank" rel="noopener noreferrer" href="https://github.com/WinlatorXR/HaloCEWXR">HWXR</a> - A fork of the Halo CE PCVR mod to support the WinlatorXR API (mod DLL, C++)
		</li>
	</ul>
	<div>
		<h2 class="heading-element" tabindex="-1">
			Code tools
		</h2>
	</div>
	<ul>
		<li>
			<a target="_blank" rel="noopener noreferrer" href="https://github.com/WinlatorXR/XrAPIUDPTester">XrAPIUDPTester</a> - A simple tool for sending test 6DOF data to your own games or apps (full project EXE, C#)
		</li>
	</ul>
	<center>
		<iframe width="560" height="315" src="https://www.youtube.com/embed/aPVFDYeOwXw?si=K3QUILYvzwA3l2qc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
	</center>
</body>
</html>
